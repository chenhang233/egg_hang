"use strict";(self.webpackChunkegg_frontend=self.webpackChunkegg_frontend||[]).push([[418],{37418:function(e,n,r){r.r(n);var a=r(1413),s=r(74165),t=r(15861),i=r(29439),l=r(72791),u=r(49389),c=r(87661),d=r(23695),o=r(32014),p=r(97484),h=r(44960),m=r(87309),x=r(49553),f=r(77106),Z=r(79286),j=r(4479),v=r(95048),b=r(75523),g=r(31776),w=r(80184),y=u.Z.TextArea,k=c.Z.TabPane;n.default=function(){var e=(0,l.useState)(!0),n=(0,i.Z)(e,2),r=n[0],C=n[1],I=(0,l.useState)(),T=(0,i.Z)(I,2),P=T[0],U=T[1],F=(0,l.useState)(!1),L=(0,i.Z)(F,2),R=L[0],A=L[1],S=(0,l.useRef)(null),V=(0,l.useRef)(null),q=(0,j.T)(),z=(0,j.C)((function(e){return e.user.info.userinfo}),v.wU),D=z.username,E=z.password,_=z.sex,G=z.phone,J=z.introduction,K=z.avatar,M=z.nickname,N=z.uuid;(0,l.useEffect)((function(){var e;U(K),null===(e=V.current)||void 0===e||e.setFieldsValue({username:D,password:E,sex:_,phone:G,introduction:J,nickname:M})}),[K,D,E,_,G,J,M]);var W=function(e,n){var r=new FileReader;r.addEventListener("load",(function(){return n(r.result)})),r.readAsDataURL(e)},B=function(e){var n=e.size/1024/1024<2;return n||d.ZP.error("\u6700\u59272M\u7684\u4e0a\u4f20\u56fe\u7247"),n},H=(0,w.jsxs)("div",{children:[R?(0,w.jsx)(f.Z,{}):(0,w.jsx)(Z.Z,{}),(0,w.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),O=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(n){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=n.target.files)||void 0===r||!r.length||!B(r[0])){e.next=9;break}return A(!0),(a=new FormData).append("file",r[0]),e.next=7,q((0,b.h4)(a));case 7:W(r[0],(function(e){U(e),q((0,b.J3)(e))})),A(!1);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q((0,b.y5)((0,a.Z)((0,a.Z)({},n),{},{uuid:N})));case 2:return e.next=4,q((0,b.CW)());case 4:(0,g.Vp)("\u4fee\u6539\u6210\u529f"),C(!0);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsx)("div",{children:(0,w.jsxs)(c.Z,{defaultActiveKey:"1",children:[(0,w.jsxs)(k,{tab:"\u6539\u4fe1\u606f",children:[(0,w.jsx)(o.Z,{checked:!r,onChange:function(e){return C(!e.target.checked)},children:"\u8868\u5355\u7f16\u8f91"}),(0,w.jsxs)(p.Z,{ref:V,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",disabled:r,autoComplete:"off",initialValues:{username:D,password:E,sex:_,phone:G,introduction:J,nickname:M},onFinish:Q,children:[(0,w.jsx)(p.Z.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"},{min:2,max:20,message:"\u8f93\u51652-20\u4e2a\u5b57\u7b26"}],children:(0,w.jsx)(u.Z,{placeholder:"Username",disabled:!0})}),(0,w.jsx)(p.Z.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"},{min:2,max:20,message:"\u8f93\u51652-20\u4e2a\u5b57\u7b26"}],children:(0,w.jsx)(u.Z,{type:"password",placeholder:"Password",disabled:!0})}),(0,w.jsx)(p.Z.Item,{label:"\u6027\u522b",name:"sex",children:(0,w.jsxs)(h.ZP.Group,{children:[(0,w.jsx)(h.ZP,{value:"\u7537",children:"\u7537"}),(0,w.jsx)(h.ZP,{value:"\u5973",children:"\u5973"})]})}),(0,w.jsx)(p.Z.Item,{label:"\u624b\u673a\u53f7",name:"phone",rules:[{max:11,min:9,message:"\u624b\u673a\u53f7\u9519\u8bef"}],children:(0,w.jsx)(u.Z,{type:"text",placeholder:"phone"})}),(0,w.jsx)(p.Z.Item,{label:"\u6635\u79f0",name:"nickname",rules:[{max:10,message:"\u6635\u79f0\u6700\u592710\u4e2a\u5b57\u7b26"}],children:(0,w.jsx)(u.Z,{type:"text",placeholder:"\u6635\u79f0"})}),(0,w.jsx)(p.Z.Item,{label:"\u4e2a\u4eba\u4ecb\u7ecd",name:"introduction",children:(0,w.jsx)(y,{rows:4,maxLength:300})}),(0,w.jsx)(p.Z.Item,{label:"\u4fee\u6539",children:(0,w.jsx)(m.Z,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]},"1"),(0,w.jsxs)(k,{tab:"\u6362\u5934\u50cf",children:[(0,w.jsx)(x.Z,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,disabled:!0,children:P?(0,w.jsx)("img",{src:P,alt:"avatar",style:{width:"100%"}}):H}),(0,w.jsx)(m.Z,{type:"primary",onClick:function(){return S.current&&S.current.click()},style:{marginTop:16},children:"\u4e0a\u4f20\u65b0\u5934\u50cf"}),(0,w.jsx)("input",{ref:S,type:"file",name:"avatar",id:"",hidden:!0,onChange:function(e){return O(e)}})]},"2")]})})}}}]);
//# sourceMappingURL=418.7d8380ac.chunk.js.map