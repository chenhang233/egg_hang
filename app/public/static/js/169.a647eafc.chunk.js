"use strict";(self.webpackChunkegg_frontend=self.webpackChunkegg_frontend||[]).push([[169],{98169:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(29439),o=n(66023),s=n(2126),c=n(35945),i=n(77732),r=n(87309),u=n(81694),l=n.n(u),d="Forum_root__dhmGd",m=n(72426),f=n.n(m),h=n(242),v=n.n(h),p=n(72791),x=n(4479),j=n(69825),g=n(95048),y=n(80184),N=function(){var e=(0,p.useRef)(null),t=(0,x.T)(),n=(0,p.useState)(400),u=(0,a.Z)(n,2),m=u[0],h=u[1],N=(0,p.useState)(""),w=(0,a.Z)(N,2),k=w[0],Z=w[1],C=(0,x.C)((function(e){return e.user.info.userinfo}),g.wU).uuid,b=(0,x.C)((function(e){return e.socket.tempForumList}),g.wU);(0,p.useEffect)((function(){var e=document.querySelector(".ant-list-items li:nth-last-child(1)");null===e||void 0===e||e.scrollIntoView()}),[b]),(0,p.useEffect)((function(){if(h(document.body.clientHeight-350),C){var n=v()("http://localhost:7001/forum",{transports:["websocket"],query:{room:"tempPnP",uuid:C}});return e.current=n,n.on("connect",(function(){})),n.on("online",(function(e){console.log(e,"payload")})),n.on("disconnect",(function(e){console.log(e,"\u9000\u51fa\u539f\u56e0")})),n.on("message",(function(e){t((0,j.av)(e.data.payload))})),function(){n.close()}}}),[C,t]);return(0,y.jsxs)("div",{className:l()(d),children:[(0,y.jsx)("div",{className:"online"}),(0,y.jsxs)("div",{className:"panel",children:[(0,y.jsx)("h3",{children:"\u6d88\u606f\u8bb0\u5f55"}),(0,y.jsx)("hr",{}),(0,y.jsx)("div",{className:"content",style:{height:m},children:(0,y.jsx)(s.ZP,{className:"comment-list",itemLayout:"horizontal",dataSource:b&&b.map((function(e){return{author:e.nickname||"\u533f\u540d\u7528\u6237",avatar:e.avatar,content:(0,y.jsx)("div",{className:"comment",children:e.content}),datetime:(0,y.jsx)(c.Z,{title:f()(e.datetime).format("YYYY-MM-DD HH:mm:ss"),children:(0,y.jsx)("span",{children:f()(e.datetime).fromNow()})}),type:e.type}})),renderItem:function(e){return(0,y.jsx)("li",{className:l()(e.type),children:(0,y.jsx)(i.Z,{author:e.author,avatar:e.avatar,content:e.content,datetime:e.datetime})})}})}),(0,y.jsxs)("div",{className:"emit",children:[(0,y.jsx)(o.Z,{rows:4,maxLength:1e3,value:k,onChange:function(e){return function(e){Z(e.target.value)}(e)}}),(0,y.jsx)(r.Z,{type:"primary",className:"buttonEmit",onClick:function(){e.current.emit("exchange",{payload:{content:k,uuid:C,datetime:Date.now()}}),Z("")},children:"\u53d1\u9001"})]})]}),(0,y.jsx)("div",{className:"right"})]})}}}]);
//# sourceMappingURL=169.a647eafc.chunk.js.map