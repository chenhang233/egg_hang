{"version":3,"file":"static/js/693.7052fc51.chunk.js","mappings":"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","sources":["../node_modules/antd/es/tag/CheckableTag.js","../node_modules/antd/es/tag/index.js","webpack://egg_frontend/./src/pages/Index/pages/permissionManage/index.module.scss?cf64","pages/Index/pages/permissionManage/index.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\n\nvar CheckableTag = function CheckableTag(_a) {\n  var _classNames;\n\n  var customizePrefixCls = _a.prefixCls,\n      className = _a.className,\n      checked = _a.checked,\n      onChange = _a.onChange,\n      onClick = _a.onClick,\n      restProps = __rest(_a, [\"prefixCls\", \"className\", \"checked\", \"onChange\", \"onClick\"]);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var handleClick = function handleClick(e) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(!checked);\n    onClick === null || onClick === void 0 ? void 0 : onClick(e);\n  };\n\n  var prefixCls = getPrefixCls('tag', customizePrefixCls);\n  var cls = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-checkable\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-checkable-checked\"), checked), _classNames), className);\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, restProps, {\n    className: cls,\n    onClick: handleClick\n  }));\n};\n\nexport default CheckableTag;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport { PresetColorTypes, PresetStatusColorTypes } from '../_util/colors';\nimport Wave from '../_util/wave';\nimport CheckableTag from './CheckableTag';\nvar PresetColorRegex = new RegExp(\"^(\".concat(PresetColorTypes.join('|'), \")(-inverse)?$\"));\nvar PresetStatusColorRegex = new RegExp(\"^(\".concat(PresetStatusColorTypes.join('|'), \")$\"));\n\nvar InternalTag = function InternalTag(_a, ref) {\n  var _classNames;\n\n  var customizePrefixCls = _a.prefixCls,\n      className = _a.className,\n      style = _a.style,\n      children = _a.children,\n      icon = _a.icon,\n      color = _a.color,\n      onClose = _a.onClose,\n      closeIcon = _a.closeIcon,\n      _a$closable = _a.closable,\n      closable = _a$closable === void 0 ? false : _a$closable,\n      props = __rest(_a, [\"prefixCls\", \"className\", \"style\", \"children\", \"icon\", \"color\", \"onClose\", \"closeIcon\", \"closable\"]);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      visible = _React$useState2[0],\n      setVisible = _React$useState2[1];\n\n  React.useEffect(function () {\n    if ('visible' in props) {\n      setVisible(props.visible);\n    }\n  }, [props.visible]);\n\n  var isPresetColor = function isPresetColor() {\n    if (!color) {\n      return false;\n    }\n\n    return PresetColorRegex.test(color) || PresetStatusColorRegex.test(color);\n  };\n\n  var tagStyle = _extends({\n    backgroundColor: color && !isPresetColor() ? color : undefined\n  }, style);\n\n  var presetColor = isPresetColor();\n  var prefixCls = getPrefixCls('tag', customizePrefixCls);\n  var tagClassName = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(color), presetColor), _defineProperty(_classNames, \"\".concat(prefixCls, \"-has-color\"), color && !presetColor), _defineProperty(_classNames, \"\".concat(prefixCls, \"-hidden\"), !visible), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n\n  var handleCloseClick = function handleCloseClick(e) {\n    e.stopPropagation();\n    onClose === null || onClose === void 0 ? void 0 : onClose(e);\n\n    if (e.defaultPrevented) {\n      return;\n    }\n\n    if (!('visible' in props)) {\n      setVisible(false);\n    }\n  };\n\n  var renderCloseIcon = function renderCloseIcon() {\n    if (closable) {\n      return closeIcon ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        onClick: handleCloseClick\n      }, closeIcon) : /*#__PURE__*/React.createElement(CloseOutlined, {\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        onClick: handleCloseClick\n      });\n    }\n\n    return null;\n  };\n\n  var isNeedWave = 'onClick' in props || children && children.type === 'a';\n  var tagProps = omit(props, ['visible']);\n  var iconNode = icon || null;\n  var kids = iconNode ? /*#__PURE__*/React.createElement(React.Fragment, null, iconNode, /*#__PURE__*/React.createElement(\"span\", null, children)) : children;\n  var tagNode = /*#__PURE__*/React.createElement(\"span\", _extends({}, tagProps, {\n    ref: ref,\n    className: tagClassName,\n    style: tagStyle\n  }), kids, renderCloseIcon());\n  return isNeedWave ? /*#__PURE__*/React.createElement(Wave, null, tagNode) : tagNode;\n};\n\nvar Tag = /*#__PURE__*/React.forwardRef(InternalTag);\n\nif (process.env.NODE_ENV !== 'production') {\n  Tag.displayName = 'Tag';\n}\n\nTag.CheckableTag = CheckableTag;\nexport default Tag;","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"permissionManage_root__8GtsM\"};","import { useEffect, useState } from 'react'\r\nimport { Button, Select, Table, Tag } from 'antd'\r\nimport { shallowEqual } from 'react-redux'\r\nimport { useAppDispatch, useAppSelector } from '../../../../redux/hook'\r\nimport { getRoleConditionRead } from '../../../../redux/slice'\r\nimport styles from './index.module.scss'\r\nimport classNames from 'classnames'\r\nimport { ColumnsType } from 'antd/lib/table'\r\nimport { Condition_1, Condition_2 } from '../../../../api/APItype'\r\nimport { transformIconStringToJSX } from '../../../../utils/enum'\r\nimport {\r\n  addInterface,\r\n  addRouter,\r\n  removeInterFace,\r\n  removeRouter,\r\n} from '../../../../api/user'\r\nimport { error, success } from '../../../../api'\r\n\r\ninterface AddObj {\r\n  type: 'add' | 'remove'\r\n  Ptype: 'router' | 'interface'\r\n  uuid: number\r\n  interfaceId?: number\r\n  routerId?: number\r\n  msg: string\r\n}\r\nconst { Option } = Select\r\n\r\nconst PermissionManage = () => {\r\n  const dispatch = useAppDispatch()\r\n  const Roles = useAppSelector((state) => state.user.Roles, shallowEqual)\r\n  const routerAuth = useAppSelector(\r\n    (state) => state.user.routerAuth,\r\n    shallowEqual\r\n  )\r\n\r\n  const interfaceAuth = useAppSelector(\r\n    (state) => state.user.interfaceAuth,\r\n    shallowEqual\r\n  )\r\n  const [roleUUID, setroleUUID] = useState<number>(\r\n    Roles.length && Roles[0].uuid\r\n  )\r\n  const [condition, setCondition] = useState<'I' | 'R'>('R')\r\n\r\n  useEffect(() => {\r\n    dispatch(getRoleConditionRead({ condition: 'R' }))\r\n  }, [dispatch])\r\n  const roleChange = async (value: number) => {\r\n    setroleUUID(value)\r\n    await dispatch(\r\n      getRoleConditionRead({ condition: condition, uuid: value, roleP: Roles })\r\n    )\r\n  }\r\n  const ConditionChange = async (value: 'I' | 'R') => {\r\n    setCondition(value)\r\n    await dispatch(\r\n      getRoleConditionRead({ condition: value, uuid: roleUUID, roleP: Roles })\r\n    )\r\n  }\r\n  const serachChange = async () => {\r\n    await dispatch(\r\n      getRoleConditionRead({\r\n        condition: condition,\r\n        uuid: roleUUID,\r\n        roleP: Roles,\r\n      })\r\n    )\r\n  }\r\n  const authIndex = ({\r\n    type,\r\n    Ptype,\r\n    uuid,\r\n    routerId,\r\n    interfaceId,\r\n    msg,\r\n  }: AddObj) => {\r\n    const arr = []\r\n    switch (Ptype) {\r\n      case 'router':\r\n        if (routerId || routerId === 0) {\r\n          if (type === 'add') {\r\n            arr.push(addRouter({ uuid, routerId }))\r\n          }\r\n          if (type === 'remove') {\r\n            arr.push(removeRouter({ uuid, routerId }))\r\n          }\r\n        }\r\n        break\r\n      case 'interface':\r\n        if (interfaceId || interfaceId === 0) {\r\n          if (type === 'add') {\r\n            arr.push(addInterface({ uuid, interfaceId }))\r\n          }\r\n          if (type === 'remove') {\r\n            arr.push(removeInterFace({ uuid, interfaceId }))\r\n          }\r\n        }\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    if (arr.length === 0) return error('authIndex 有问题')\r\n    arr[0].then((res) => {\r\n      if (res) {\r\n        success(msg)\r\n        serachChange()\r\n      }\r\n    })\r\n  }\r\n  const columns1: ColumnsType<Condition_1> = [\r\n    { title: 'uuid', dataIndex: 'uuid' },\r\n    { title: '接口名字', dataIndex: 'name' },\r\n    {\r\n      title: '接口权限',\r\n      dataIndex: 'auth',\r\n      render: (value: boolean, record) =>\r\n        value ? (\r\n          <Tag\r\n            color=\"success\"\r\n            icon={transformIconStringToJSX('CheckCircleOutlined')}\r\n          >\r\n            有\r\n          </Tag>\r\n        ) : (\r\n          <Tag\r\n            color=\"error\"\r\n            icon={transformIconStringToJSX('CloseCircleOutlined')}\r\n          >\r\n            无\r\n          </Tag>\r\n        ),\r\n    },\r\n    { title: '接口url', dataIndex: 'url' },\r\n    {\r\n      title: '操作',\r\n      render: (_, record) => {\r\n        if (record.auth) {\r\n          return (\r\n            <Button\r\n              type=\"primary\"\r\n              danger\r\n              hidden={!!record.children}\r\n              onClick={() =>\r\n                authIndex({\r\n                  type: 'remove',\r\n                  Ptype: 'interface',\r\n                  interfaceId: record.uuid,\r\n                  uuid: roleUUID,\r\n                  msg: '删除接口权限成功',\r\n                })\r\n              }\r\n            >\r\n              删除权限\r\n            </Button>\r\n          )\r\n        } else {\r\n          return (\r\n            <Button\r\n              type=\"primary\"\r\n              hidden={!!record.children}\r\n              onClick={() =>\r\n                authIndex({\r\n                  type: 'add',\r\n                  Ptype: 'interface',\r\n                  uuid: roleUUID,\r\n                  interfaceId: record.uuid,\r\n                  msg: '添加接口权限成功',\r\n                })\r\n              }\r\n            >\r\n              添加权限\r\n            </Button>\r\n          )\r\n        }\r\n      },\r\n    },\r\n  ]\r\n  const columns2: ColumnsType<Condition_2> = [\r\n    { title: 'uuid', dataIndex: 'uuid' },\r\n    { title: '路由名称', dataIndex: 'routerName' },\r\n    { title: '路由id', dataIndex: 'rootId' },\r\n    {\r\n      title: '路由标签',\r\n      dataIndex: 'icon',\r\n      render: (value: string) => transformIconStringToJSX(value),\r\n    },\r\n    {\r\n      title: '路由权限',\r\n      dataIndex: 'auth',\r\n      render: (value: boolean, record) =>\r\n        value ? (\r\n          <Tag\r\n            color=\"success\"\r\n            icon={transformIconStringToJSX('CheckCircleOutlined')}\r\n            hidden={!!record.children}\r\n          >\r\n            有\r\n          </Tag>\r\n        ) : (\r\n          <Tag\r\n            color=\"error\"\r\n            icon={transformIconStringToJSX('CloseCircleOutlined')}\r\n            hidden={!!record.children}\r\n          >\r\n            无\r\n          </Tag>\r\n        ),\r\n    },\r\n    {\r\n      title: '操作',\r\n      render: (_, record) => {\r\n        if (record.auth) {\r\n          return (\r\n            <Button\r\n              type=\"primary\"\r\n              danger\r\n              hidden={!!record.children}\r\n              onClick={() =>\r\n                authIndex({\r\n                  type: 'remove',\r\n                  Ptype: 'router',\r\n                  uuid: roleUUID,\r\n                  routerId: record.uuid,\r\n                  msg: '删除路由权限成功',\r\n                })\r\n              }\r\n            >\r\n              删除权限\r\n            </Button>\r\n          )\r\n        } else {\r\n          return (\r\n            <Button\r\n              type=\"primary\"\r\n              hidden={!!record.children}\r\n              onClick={() =>\r\n                authIndex({\r\n                  type: 'add',\r\n                  Ptype: 'router',\r\n                  uuid: roleUUID,\r\n                  routerId: record.uuid,\r\n                  msg: '添加路由权限成功',\r\n                })\r\n              }\r\n            >\r\n              添加权限\r\n            </Button>\r\n          )\r\n        }\r\n      },\r\n    },\r\n  ]\r\n  return (\r\n    <main className={classNames(styles.root)}>\r\n      {Roles.length > 0 && (\r\n        <header>\r\n          <Select\r\n            showSearch\r\n            style={{ width: 200 }}\r\n            placeholder=\"选择角色\"\r\n            optionFilterProp=\"children\"\r\n            filterOption={(input, option) =>\r\n              (option!.children as unknown as string).includes(input)\r\n            }\r\n            onChange={roleChange}\r\n            defaultValue={Roles[0].uuid}\r\n          >\r\n            {Roles.map((obj) => (\r\n              <Option value={obj.uuid} key={obj.uuid}>\r\n                {obj.roleName}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n          <Select\r\n            defaultValue=\"R\"\r\n            style={{ width: 120 }}\r\n            onChange={ConditionChange}\r\n          >\r\n            <Option value=\"R\">路由权限</Option>\r\n            <Option value=\"I\">接口权限</Option>\r\n          </Select>\r\n          <Button type=\"primary\" onClick={serachChange}>\r\n            重新搜索\r\n          </Button>\r\n        </header>\r\n      )}\r\n      {condition === 'R' ? (\r\n        <Table\r\n          columns={columns2}\r\n          dataSource={routerAuth}\r\n          rowKey={(record) => record.uuid}\r\n        />\r\n      ) : (\r\n        <Table\r\n          columns={columns1}\r\n          dataSource={interfaceAuth}\r\n          rowKey={(record) => record.uuid}\r\n        />\r\n      )}\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default PermissionManage\r\n"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","_a","_classNames","customizePrefixCls","prefixCls","className","checked","onChange","onClick","restProps","getPrefixCls","React","ConfigContext","cls","classNames","_defineProperty","concat","_extends","PresetColorRegex","RegExp","PresetColorTypes","PresetStatusColorRegex","PresetStatusColorTypes","InternalTag","ref","style","children","icon","color","onClose","closeIcon","_a$closable","closable","props","_React$useContext","direction","_React$useState","_React$useState2","_slicedToArray","visible","setVisible","isPresetColor","test","tagStyle","backgroundColor","undefined","presetColor","tagClassName","handleCloseClick","stopPropagation","defaultPrevented","isNeedWave","type","tagProps","omit","iconNode","kids","tagNode","CloseOutlined","Wave","Tag","CheckableTag","Option","Select","dispatch","useAppDispatch","Roles","useAppSelector","state","user","shallowEqual","routerAuth","interfaceAuth","useState","uuid","roleUUID","setroleUUID","condition","setCondition","useEffect","getRoleConditionRead","roleChange","value","roleP","ConditionChange","serachChange","authIndex","Ptype","routerId","interfaceId","msg","arr","push","addRouter","removeRouter","addInterface","removeInterFace","error","then","res","success","columns1","title","dataIndex","render","record","transformIconStringToJSX","_","auth","danger","hidden","columns2","styles","showSearch","width","placeholder","optionFilterProp","filterOption","input","option","includes","defaultValue","map","obj","roleName","columns","dataSource","rowKey"],"sourceRoot":""}