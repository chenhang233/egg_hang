"use strict";(self.webpackChunkegg_frontend=self.webpackChunkegg_frontend||[]).push([[101],{51101:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(1413),a=t(74165),i=t(15861),u=t(29439),s=t(8300),l=t(97484),c=t(49389),d=t(66106),o=t(87309),f=t(83099),x=t(72791),p=t(95048),h=t(4479),m=t(75523),Z=t(36076),v=t(81694),g=t.n(v),k="RoleManage_root__xA-WJ",b=t(31756),j=t(31776),C=t(80184),w=s.Z.Column,S=[{title:"\u89d2\u8272id",dataIndex:"uuid"},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"roleName"},{title:"\u89d2\u8272\u63cf\u8ff0",dataIndex:"roleMark"}],y=function(){var e=(0,x.useState)("add"),n=(0,u.Z)(e,2),t=n[0],v=n[1],y=(0,x.useState)(!1),R=(0,u.Z)(y,2),I=R[0],z=R[1],N=(0,x.useState)(),_=(0,u.Z)(N,2),F=_[0],M=_[1],O=(0,x.useState)(!1),U=(0,u.Z)(O,2),A=U[0],q=U[1],E=x.createRef(),J=(0,h.T)(),V=(0,h.C)((function(e){return e.user.Roles}),p.wU);(0,x.useEffect)((function(){J((0,m.Rl)())}),[J]);var W=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n,r,i,u,s,l,c,d,o,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=21;break}return e.prev=1,n=E.current,e.next=5,n.validateFields();case 5:return r=n.getFieldsValue(),q(!0),e.next=9,(0,b.MQ)(r);case 9:if(i=e.sent,u=i.data,s=u.code,l=u.message,1!==s){e.next=15;break}return e.abrupt("return",(0,j.vU)(l));case 15:0===s&&(B("\u6dfb\u52a0\u6210\u529f"),n.resetFields()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),q(!1);case 21:if("delete"!==t||!F&&0!==F){e.next=40;break}return e.prev=22,q(!0),e.next=26,(0,b.Rd)(F);case 26:if(c=e.sent,d=c.data,o=d.code,f=d.message,1!==o){e.next=32;break}return e.abrupt("return",(0,j.vU)(f));case 32:0===o&&B("\u5220\u9664\u6210\u529f"),e.next=40;break;case 35:e.prev=35,e.t1=e.catch(22),q(!1),z(!1),(0,j.vU)("ERROR ".concat(JSON.stringify(e.t1)));case 40:case"end":return e.stop()}}),e,null,[[1,18],[22,35]])})));return function(){return e.apply(this,arguments)}}(),B=function(e){z(!1),q(!1),(0,j.Vp)(e),J((0,m.Rl)())},D=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.uuid,v("delete"),z(!0),M(t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,C.jsxs)("main",{className:g()(k),children:[(0,C.jsx)(Z.Z,{visible:I,confirmLoading:A,handleOk:W,handleCancel:function(){var e;z(!1),null===(e=E.current)||void 0===e||e.resetFields()},title:"add"===t?"\u6dfb\u52a0\u89d2\u8272":"\u5220\u9664\u89d2\u8272",children:"add"===t?(0,C.jsxs)(l.Z,{autoComplete:"off",ref:E,labelCol:{flex:"110px"},labelAlign:"left",labelWrap:!0,wrapperCol:{flex:1},children:[(0,C.jsx)(l.Z.Item,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",rules:[{required:!0,min:1,max:10,message:"1-10\u4e2a\u5b57"}],children:(0,C.jsx)(c.Z,{})}),(0,C.jsx)(l.Z.Item,{label:"\u89d2\u8272\u63cf\u8ff0",name:"roleMark",rules:[{required:!1,max:50,message:"\u6700\u591a50\u4e2a\u5b57"}],children:(0,C.jsx)(c.Z,{})})]}):(0,C.jsx)("p",{children:"\u786e\u5b9a\u5220\u9664\u5f53\u524d\u89d2\u8272\u5417"})}),(0,C.jsx)(d.Z,{justify:"end",children:(0,C.jsx)(o.Z,{type:"primary",className:"roleAddButton",onClick:function(){return v("add"),void z(!0)},children:"\u6dfb\u52a0\u89d2\u8272"})}),(0,C.jsxs)(s.Z,{pagination:{total:V.length,showSizeChanger:!0,onShowSizeChange:function(e,n){console.log(e,n)},pageSizeOptions:[5,10,20,50],defaultPageSize:5},dataSource:V.map((function(e){return(0,r.Z)({key:e.uuid},e)})),rowKey:function(e){return e.uuid},children:[S.map((function(e){var n=e.title,t=e.dataIndex;return(0,C.jsx)(w,{title:n,dataIndex:t},t)})),(0,C.jsx)(w,{title:"\u64cd\u4f5c",render:function(e,n){return(0,C.jsx)(f.Z,{size:"middle",children:(0,C.jsx)(o.Z,{type:"dashed",onClick:function(){return D(n)},disabled:!n.canDelete,children:"\u5220\u9664"})})}},"action")]})]})}}}]);
//# sourceMappingURL=101.b0f52117.chunk.js.map