"use strict";(self.webpackChunkegg_frontend=self.webpackChunkegg_frontend||[]).push([[693],{1693:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(4165),i=t(5861),c=t(9439),o=t(2791),u=t(6435),l=t(4942),a=t(7462),d=t(732),s=t(1694),f=t.n(s),p=t(1818),h=t(1929),y=t(4466),m=t(2833),x=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t},v=function(e){var n,t=e.prefixCls,r=e.className,i=e.checked,c=e.onChange,u=e.onClick,d=x(e,["prefixCls","className","checked","onChange","onClick"]),s=(0,o.useContext(h.E_).getPrefixCls)("tag",t),p=f()(s,(n={},(0,l.Z)(n,"".concat(s,"-checkable"),!0),(0,l.Z)(n,"".concat(s,"-checkable-checked"),i),n),r);return o.createElement("span",(0,a.Z)({},d,{className:p,onClick:function(e){null===c||void 0===c||c(!i),null===u||void 0===u||u(e)}}))},C=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t},g=new RegExp("^(".concat(y.Y.join("|"),")(-inverse)?$")),Z=new RegExp("^(".concat(y.E.join("|"),")$")),b=function(e,n){var t,r=e.prefixCls,i=e.className,u=e.style,s=e.children,y=e.icon,x=e.color,v=e.onClose,b=e.closeIcon,j=e.closable,k=void 0!==j&&j,I=C(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),w=o.useContext(h.E_),O=w.getPrefixCls,P=w.direction,E=o.useState(!0),N=(0,c.Z)(E,2),S=N[0],R=N[1];o.useEffect((function(){"visible"in I&&R(I.visible)}),[I.visible]);var $=function(){return!!x&&(g.test(x)||Z.test(x))},_=(0,a.Z)({backgroundColor:x&&!$()?x:void 0},u),Q=$(),U=O("tag",r),G=f()(U,(t={},(0,l.Z)(t,"".concat(U,"-").concat(x),Q),(0,l.Z)(t,"".concat(U,"-has-color"),x&&!Q),(0,l.Z)(t,"".concat(U,"-hidden"),!S),(0,l.Z)(t,"".concat(U,"-rtl"),"rtl"===P),t),i),K=function(e){e.stopPropagation(),null===v||void 0===v||v(e),e.defaultPrevented||"visible"in I||R(!1)},V="onClick"in I||s&&"a"===s.type,A=(0,p.Z)(I,["visible"]),F=y||null,M=F?o.createElement(o.Fragment,null,F,o.createElement("span",null,s)):s,T=o.createElement("span",(0,a.Z)({},A,{ref:n,className:G,style:_}),M,k?b?o.createElement("span",{className:"".concat(U,"-close-icon"),onClick:K},b):o.createElement(d.Z,{className:"".concat(U,"-close-icon"),onClick:K}):null);return V?o.createElement(m.Z,null,T):T},j=o.forwardRef(b);j.CheckableTag=v;var k=j,I=t(7309),w=t(2872),O=t(5048),P=t(4479),E=t(5523),N="permissionManage_root__8GtsM",S=t(3462),R=t(1756),$=t(1776),_=t(184),Q=u.Z.Option,U=function(){var e=(0,P.T)(),n=(0,P.C)((function(e){return e.user.Roles}),O.wU),t=(0,P.C)((function(e){return e.user.routerAuth}),O.wU),l=(0,P.C)((function(e){return e.user.interfaceAuth}),O.wU),a=(0,o.useState)(n.length&&n[0].uuid),d=(0,c.Z)(a,2),s=d[0],p=d[1],h=(0,o.useState)("R"),y=(0,c.Z)(h,2),m=y[0],x=y[1];(0,o.useEffect)((function(){e((0,E.rQ)({condition:"R"}))}),[e]);var v=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(i),t.next=3,e((0,E.rQ)({condition:m,uuid:i,roleP:n}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(i),t.next=3,e((0,E.rQ)({condition:i,uuid:s,roleP:n}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,E.rQ)({condition:m,uuid:s,roleP:n}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(e){var n=e.type,t=e.Ptype,r=e.uuid,i=e.routerId,c=e.interfaceId,o=e.msg,u=[];switch(t){case"router":(i||0===i)&&("add"===n&&u.push((0,R.WP)({uuid:r,routerId:i})),"remove"===n&&u.push((0,R.GS)({uuid:r,routerId:i})));break;case"interface":(c||0===c)&&("add"===n&&u.push((0,R.IG)({uuid:r,interfaceId:c})),"remove"===n&&u.push((0,R.KP)({uuid:r,interfaceId:c})))}if(0===u.length)return(0,$.vU)("authIndex \u6709\u95ee\u9898");u[0].then((function(e){e&&((0,$.Vp)(o),g())}))},b=[{title:"uuid",dataIndex:"uuid"},{title:"\u63a5\u53e3\u540d\u5b57",dataIndex:"name"},{title:"\u63a5\u53e3\u6743\u9650",dataIndex:"auth",render:function(e,n){return e?(0,_.jsx)(k,{color:"success",icon:(0,S.$)("CheckCircleOutlined"),children:"\u6709"}):(0,_.jsx)(k,{color:"error",icon:(0,S.$)("CloseCircleOutlined"),children:"\u65e0"})}},{title:"\u63a5\u53e3url",dataIndex:"url"},{title:"\u64cd\u4f5c",render:function(e,n){return n.auth?(0,_.jsx)(I.Z,{type:"primary",danger:!0,hidden:!!n.children,onClick:function(){return Z({type:"remove",Ptype:"interface",interfaceId:n.uuid,uuid:s,msg:"\u5220\u9664\u63a5\u53e3\u6743\u9650\u6210\u529f"})},children:"\u5220\u9664\u6743\u9650"}):(0,_.jsx)(I.Z,{type:"primary",hidden:!!n.children,onClick:function(){return Z({type:"add",Ptype:"interface",uuid:s,interfaceId:n.uuid,msg:"\u6dfb\u52a0\u63a5\u53e3\u6743\u9650\u6210\u529f"})},children:"\u6dfb\u52a0\u6743\u9650"})}}],j=[{title:"uuid",dataIndex:"uuid"},{title:"\u8def\u7531\u540d\u79f0",dataIndex:"routerName"},{title:"\u8def\u7531id",dataIndex:"rootId"},{title:"\u8def\u7531\u6807\u7b7e",dataIndex:"icon",render:function(e){return(0,S.$)(e)}},{title:"\u8def\u7531\u6743\u9650",dataIndex:"auth",render:function(e,n){return e?(0,_.jsx)(k,{color:"success",icon:(0,S.$)("CheckCircleOutlined"),hidden:!!n.children,children:"\u6709"}):(0,_.jsx)(k,{color:"error",icon:(0,S.$)("CloseCircleOutlined"),hidden:!!n.children,children:"\u65e0"})}},{title:"\u64cd\u4f5c",render:function(e,n){return n.auth?(0,_.jsx)(I.Z,{type:"primary",danger:!0,hidden:!!n.children,onClick:function(){return Z({type:"remove",Ptype:"router",uuid:s,routerId:n.uuid,msg:"\u5220\u9664\u8def\u7531\u6743\u9650\u6210\u529f"})},children:"\u5220\u9664\u6743\u9650"}):(0,_.jsx)(I.Z,{type:"primary",hidden:!!n.children,onClick:function(){return Z({type:"add",Ptype:"router",uuid:s,routerId:n.uuid,msg:"\u6dfb\u52a0\u8def\u7531\u6743\u9650\u6210\u529f"})},children:"\u6dfb\u52a0\u6743\u9650"})}}];return(0,_.jsxs)("main",{className:f()(N),children:[n.length>0&&(0,_.jsxs)("header",{children:[(0,_.jsx)(u.Z,{showSearch:!0,style:{width:200},placeholder:"\u9009\u62e9\u89d2\u8272",optionFilterProp:"children",filterOption:function(e,n){return n.children.includes(e)},onChange:v,defaultValue:n[0].uuid,children:n.map((function(e){return(0,_.jsx)(Q,{value:e.uuid,children:e.roleName},e.uuid)}))}),(0,_.jsxs)(u.Z,{defaultValue:"R",style:{width:120},onChange:C,children:[(0,_.jsx)(Q,{value:"R",children:"\u8def\u7531\u6743\u9650"}),(0,_.jsx)(Q,{value:"I",children:"\u63a5\u53e3\u6743\u9650"})]}),(0,_.jsx)(I.Z,{type:"primary",onClick:g,children:"\u91cd\u65b0\u641c\u7d22"})]}),"R"===m?(0,_.jsx)(w.Z,{columns:j,dataSource:t,rowKey:function(e){return e.uuid}}):(0,_.jsx)(w.Z,{columns:b,dataSource:l,rowKey:function(e){return e.uuid}})]})}}}]);
//# sourceMappingURL=693.7052fc51.chunk.js.map